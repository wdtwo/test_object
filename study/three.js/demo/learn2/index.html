<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parrot</title>
    <style>
        * {
            margin:0;
            padding:0;
            user-select: none;
        }
    </style>
</head>
<body>
    <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
    <script type="importmap">
        {
            "imports":{
                "three":"./src/three.module.js"
            }
        }
    </script>
    <script type="module">

        import * as THREE from 'three'
        import {OrbitControls} from './src/OrbitControls.js'
        import {GLTFLoader} from './src/GLTFLoader.js'
        console.log(THREE);
        //创建一个3D场景
        const scene = new THREE.Scene()
        //创建一个长方体
        const geometry = new THREE.BoxGeometry(20,20,20)
        //设置材质
        const material = new THREE.MeshLambertMaterial({
            color:0xff11ff,
            transparent:true,
            opacity:0.6
        })

        //添加一个环境光 
        const ambient = new THREE.AmbientLight('ffffff',.4)
        scene.add(ambient)
       
        const point = new THREE.PointLight('ffffff',1)
        point.position.set(100,80,50)
        scene.add(point)
        //创建一个透视相机
        let width = window.innerWidth,
            height = window.innerHeight;
        const camera = new THREE.PerspectiveCamera( 30, width / height, 1, 10000 );
        //设置相机的位置
        camera.position.set(100,100,100)
        //设置相机的拍摄方向
        camera.lookAt(0,0,0)

        //创建一个webgl渲染器
        const renderer = new THREE.WebGLRenderer({
            alpha:true
        })
        //设置渲染的宽高
        renderer.setSize(width,height)
        //执行渲染
        renderer.render(scene,camera)
        //输出到页面
        document.body.appendChild(renderer.domElement)
        var mesh = null;
        //相机轨道控制器
        const controls = new OrbitControls(camera,renderer.domElement)
		const loader = new GLTFLoader();
		loader.load( './models/Parrot.glb', function ( gltf ) {
			mesh = gltf.scene
			mesh.position.set(0,0,0)
			scene.add( gltf.scene );
		} );

        const clock = new THREE.Clock()
        function renderFrame(){
            requestAnimationFrame(renderFrame)
            if(mesh){
                mesh.rotateY(0.01)
            }
            renderer.render(scene,camera)
        }
        renderFrame()
    </script>
</body>
</html>