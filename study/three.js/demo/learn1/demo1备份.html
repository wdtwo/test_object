<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin:0;
            padding:0;
            user-select: none;
        }
    </style>
</head>
<body>
    <div style="position:fixed;right:10px;top:10px;">
        帧率:<span id="fps"></span>
    </div>
    <script type="importmap">
        {
            "imports":{
                "three":"./src/three.module.js"
            }
        }
    </script>
    <script type="module">
        import * as THREE from 'three'
        import {OrbitControls} from './src/OrbitControls.js'
        console.log(THREE);
        //创建一个3D场景
        const scene = new THREE.Scene()
        //创建一个长方体
        const geometry = new THREE.BoxGeometry(100,100,100)
        //设置材质
        const material = new THREE.MeshLambertMaterial({
            color:0xff11ff,
            transparent:true,
            opacity:0.5
        })
        //创建一个网格模型对象 把创建的物体和材质绑定到网格模型
        const mesh = new THREE.Mesh(geometry,material)
        mesh.rotateY(Math.PI/4)
        //把网格模型添加到3D场景中
        scene.add(mesh)

        //添加一个环境光 
        const ambient = new THREE.AmbientLight('ffffff',0.3)
        scene.add(ambient)
        //添加一个平行光
        //const directional = new THREE.DirectionalLight('ffffff',0.8)
        //scene.add(directional)
        //添加一个半球光
        //const hemisphere = new THREE.HemisphereLight('ffffff',0.3)
        //scene.add(hemisphere)
        //添加一个点光源
        const point = new THREE.PointLight('ffffff',0.7)
        point.position.set(200,150,120)
        scene.add(point)
        //点光源辅助观察 显示点光源位置
        const pointHelper = new THREE.PointLightHelper(point,10)
        scene.add(pointHelper)

        //添加3D坐标系
        const axes = new THREE.AxesHelper(120)
        scene.add(axes)

        //创建一个透视相机
        let width = 800,
            height = 500;
        const camera = new THREE.PerspectiveCamera( 45, width / height, 1, 1000 );
        //设置相机的位置
        camera.position.set(200,200,200)
        //设置相机的拍摄方向
        camera.lookAt(0,0,0)

        //创建一个webgl渲染器
        const render = new THREE.WebGLRenderer()
        //设置渲染的宽高
        render.setSize(width,height)
        //执行渲染
        render.render(scene,camera)
        //输出到页面
        document.body.appendChild(render.domElement)

        //相机轨道控制器
        const controls = new OrbitControls(camera,render.domElement)
        controls.addEventListener('change',function(){
            render.render(scene,camera)
        })

        const clock = new THREE.Clock()
        var fps = document.getElementById('fps')
        let fpsTmp = 0
        function renderFrame(){
            fpsTmp = Math.floor(1000/(clock.getDelta()*1000))
            requestAnimationFrame(renderFrame)
            mesh.rotateY(0.01)
            render.render(scene,camera)
        }
        renderFrame()
        setInterval(function(){
            fps.innerHTML = fpsTmp
        },300)
    </script>
</body>
</html>