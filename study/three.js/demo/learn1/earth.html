<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin:0;
            padding:0;
            user-select: none;
        }
    </style>
</head>
<body>
    <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
    <script type="importmap">
        {
            "imports":{
                "three":"./src/three.module.js"
            }
        }
    </script>
    <script type="module">
        import * as THREE from 'three'
        import {OrbitControls} from './src/OrbitControls.js'
        //创建一个3D场景
        const scene = new THREE.Scene()

        //创建一个透视相机
        let width = window.innerWidth,
            height = window.innerHeight;
        const camera = new THREE.PerspectiveCamera( 30, width / height, 1, 1000 );
        //设置相机的位置
        camera.position.set(200,200,200)
        //设置相机的拍摄方向
        camera.lookAt(0,0,0)
        var mesh = null;
        function initContent() {
            let texture = new THREE.TextureLoader().load('./2.jpg');
            const geometry = new THREE.SphereGeometry( 20, 32, 16 );
            let sphereMaterial = new THREE.MeshBasicMaterial({map: texture});
            mesh = new THREE.Mesh( geometry, sphereMaterial );
            scene.add( mesh );
        }
        //initContent()
        //添加3D坐标系
        const axes = new THREE.AxesHelper(300)
        scene.add(axes)
        //画线
        function drawLine(){
            //创建实线
            const material = new THREE.LineBasicMaterial( { color: 0x0000ff } );

            //直线点参数 ↓↓↓↓↓
            var points = [];
            points.push( new THREE.Vector3( -50, 0, 0 ) );
            points.push( new THREE.Vector3( 0, 50, 0 ) );
            points.push( new THREE.Vector3( 10, 0, 0 ) );
            //直线点参数 ↑↑↑↑↑

            //曲线点参数 ↓↓↓↓↓
            // 三维样条曲线 Catmull-Rom算法
            var curve = new THREE.CatmullRomCurve3([
                new THREE.Vector3(50, 20, 90),
                new THREE.Vector3(100, 40, 40),
                new THREE.Vector3(0, 0, 0)
            ]);
            //曲线点参数 ↑↑↑↑↑

            //三点贝塞尔曲线 p1起点p3终点p2控制点 ↓↓↓↓↓
            var p1 = new THREE.Vector3(-80, 0, 0);
            var p2 = new THREE.Vector3(20, 100, 0);
            var p3 = new THREE.Vector3(80, 0, 0);
            var curve = new THREE.QuadraticBezierCurve3(p1, p2, p3);
            //三点贝塞尔曲线 ↑↑↑↑↑

            //四点贝塞尔曲线 p1起点p4终点p2p3控制点 ↓↓↓↓↓
            var p1 = new THREE.Vector3(-80, 0, 0);
            var p2 = new THREE.Vector3(-40, 100, 0);
            var p3 = new THREE.Vector3(40, 100, 0);
            var p4 = new THREE.Vector3(80, 0, 0);
            var curve = new THREE.CubicBezierCurve3(p1, p2, p3, p4);
            //四点贝塞尔曲线 ↑↑↑↑↑

            //getPoints是基类Curve的方法，返回一个vector3对象作为元素组成的数组
            var points = curve.getPoints(100); //分段数100，返回101个顶点 分段数越多越平滑 越少越尖锐
            //显示线段
            const geometry = new THREE.BufferGeometry().setFromPoints( points );
            const line = new THREE.Line( geometry, material );
            scene.add(line)
        }
        drawLine()






        //创建一个webgl渲染器
        const renderer = new THREE.WebGLRenderer({
            //alpha:true
        })
        //设置渲染的宽高
        renderer.setSize(width,height)
        //执行渲染
        renderer.render(scene,camera)
        //输出到页面
        document.body.appendChild(renderer.domElement)
        //相机轨道控制器
        const controls = new OrbitControls(camera,renderer.domElement)
        function renderFrame(){
            requestAnimationFrame(renderFrame)
            if(mesh){
                mesh.rotateY(0.003)
            }
            renderer.render(scene,camera)
        }
        renderFrame()

    </script>
</body>
</html>