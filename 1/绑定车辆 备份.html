<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="author" content="GaryWang">
	<meta name='renderer' content='webkit'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1' >
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta name="format-detection" content="email=no">
	<title>绑定车辆</title>
	<link href="css/basic.css?v=3" rel="stylesheet" type="text/css" />
	<link href="css/toast.css" rel="stylesheet" type="text/css" />
	<script>
        function autoScale(){
            var winW = document.documentElement.clientWidth;
            return Math.min (1,Math.min(winW / 1080));
        }
        document.documentElement.style.cssText = 'font-size:'+(100 * autoScale())+'px';
        //1rem = 100px
	</script>
	<style>
		#mixed-keyboard-box {
			position: fixed;
			left: 0;
			bottom: 0;
			z-index: 10;
			width: 10.8rem;
			height: 8rem;
			/* display: none; */
		}
		div#input-widget {
			height:16%!important;
		}
		div#mode-switcher{
			background: none!important;			
		}
		div#mode-switcher::before {
			font-size: 0.3rem;
			white-space: pre;
			margin-top: 0.35rem;
			display: block;
		}
		div#mode-switcher.modeof-0::before {
			color:#3875c6!important;
			content:'新能源';
		}
		div#mode-switcher.modeof-5::before {
			color:#3875c6;
			content:'燃油车';
		}
		
    </style>
</head>
<body>
	
	<div class="wrap">
		<div class="box bind-car f46 c-73 p-b-150">
			<div class="m-b-30">
				信息技术中心-研发二部
			</div>
			<div class="m-b-50">
				王重阳
			</div>
			<ul class="add-plate flex flex-jus-between">
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
			</ul>
			<button class="btn-submit">立即绑定</button>
		</div>
		<div id="mixed-keyboard-box">
			<mixed-keyboard :args="args" :callbacks="callbacks"/>
		</div>
		<div class="logo mid">
			<img src="images/logo.png" alt="尚美数智">
		</div>
		<div class="success">
			<div class="box flex flex-column re">
				<div class="svg" style="transform: scale(1.656);">
					<svg class="done" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 52 52">
						<path class="check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"></path>
					</svg>
				</div>
				<div class="m-t-70 f44 f-w-b c-555 txt">提交成功!</div>
			</div>
		</div>
	</div>
	<div class="toast_div" style="width:3rem;height:3rem;"></div>
	<script src="js/jquery-1.11.3.min.js"></script>
	<script src="js/MixedKeyboard.js"></script>  
	<script src="js/toast.js"></script>  
	<script>
		var number = "";
		let plateLen = 7
		let name = ""
		let over = false //判断车牌是否填写完整
		function native_callback_onokkey(){
			//console.log("当前车牌[OK]");
		}
		function native_callback_completed(number, isAutoCompleted){
			//console.log("当前车牌[完成]：" + number + ", 自动完成:" + isAutoCompleted);
		}
		function native_callback_changed(number, isCompleted){
			console.log("当前车牌[变更]：" + number + ", 已完成:" + isCompleted);
			name = isCompleted
			addPlate(isCompleted)
			over = number
		}
		function native_callback_show_message(message){
			console.log(message);
			if(message == "车牌类型：新能源车牌"){
				plateLen = 8
				addPlate(name)
				over = false
			}else{
				plateLen = 7
				addPlate(name)
				over = name.length == 7
			}
			showtoastFromDiv(message)
		}
		function addPlate(str){
			let ele = $('.add-plate')
			let strr = ""
			for(let i = 0;i < plateLen;i++){
				strr += str[i] ? `<li>${str[i]}</li>` : `<li></li>`
			}
			ele.html(strr)
		}
		//显示提示
		function showtoastFromDiv(str){
			$('.toast_div').toast({
				content:str,
				duration:2000
			});
		}


		let lock556 = false
		//提交
		$('.btn-submit').click(function(){
			if(lock556){
				lock556 = false
			}
			if(!over){
				showtoastFromDiv('请输入完整的车牌')
				return false
			}
			//提交成功提示
			$('.success').addClass("current")
			setTimeout(function(){
				lock556 = true
				//跳转页面
				window.location.href = './index.html'
			},2000)
		})
	</script>
</body>
</html>
