<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="author" content="GaryWang">
	<meta name='renderer' content='webkit'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1' >
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta name="format-detection" content="email=no">
	<title>车辆换绑</title>
	<link href="css/basic.css?v=3" rel="stylesheet" type="text/css" />
	<link href="css/toast.css" rel="stylesheet" type="text/css" />
	<script>
        function autoScale(){
            var winW = document.documentElement.clientWidth;
            return Math.min (1,Math.min(winW / 1080));
        }
        document.documentElement.style.cssText = 'font-size:'+(100 * autoScale())+'px';
        //1rem = 100px
	</script>
	
</head>
<body>
	<div class="wrap">
		<div class="box plate-card-box flex flex-jus-between">
			<div class="flex">
				<div class="plate-card">
					<div class="flex flex-jus-start">
						<img src="images/ico-car3.svg" />
						鲁B123456
					</div>
				</div>
			</div>
			<div class="flex flex-column flex-item-end c-b8 f42">
				<div>到期</div>
				<p>2023-05-05</p>
			</div>
		</div>
		<div class="box plate-card-box2">
			<div class="m-b-30 f46 c-73">
				信息技术中心-研发二部
			</div>
			<div class="m-b-50 f46 c-73">
				王重阳
			</div>

			<input type="text" value="鲁B123456" readonly>

			<div class="c-b8 f40 m-t-40">
				<span>剩余</span>
				<span class="f54 c-active m-0-5 residue">0</span>
				<span>天</span>
			</div>
			<div class="flex m-t-20 m-b-40">
				<img src="images/ico-move.svg" class="w100 block">
			</div>
			<div class="re plate-addtime">
				<input type="text" value="" maxlength="8" placeholder="被转入的车牌">
				<div class="btn-over">
					<img src="images/ico-search.svg" class="block w100p">
				</div>
			</div>

			<div class="c-b8 f40 m-t-40 add-date-box">
				<span class="date-start">0000-00-00</span>
				<span class="f32">+</span>
				<span class="c-active f54 residue">0</span>
				<span class="f38">天</span>
				<span class="f32">=</span>
				<span class="c-active f54 date-end">0000-00-00</span>
			</div>
			<button class="btn-submit">立即转移</button>
			<div class="warning f40 t-c m-t-20">
				<img src="images/ico-warn.svg" class="w30">
				<span>转移操作不可撤销!</span>
			</div>
			<div class="w100p p-t-40"></div>
		</div>

		<div class="w100p p-t-130"></div>

		<div class="logo mid">
			<img src="images/logo.png" alt="尚美数智">
		</div>

		<div class="success">
			<div class="box flex flex-column re">
				<div class="svg" style="transform: scale(1.656);">
					<svg class="done" xmlns="https://www.w3.org/2000/svg" viewBox="0 0 52 52">
						<path class="check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"></path>
					</svg>
				</div>
				<div class="m-t-70 f44 f-w-b c-555 txt">提交成功!</div>
			</div>
		</div>
	</div>
	<div class="toast_div" style="width:3rem;height:3rem;"></div>
	<script src="js/jquery-1.11.3.min.js"></script>
	<script src="js/dayjs.min.js"></script>
	<script src="js/toast.js"></script>
	<script>
		
		//剩余天数
		let residue = 100
		$('.residue').html(residue)
		
		//得到获取的剩余时间以后计算结束时间
		function setDate(date,len){
			//显示添加时间
			$('.add-date-box').show()
			//开始时间
			$('.date-start').html(date)
			const today = dayjs(date); // 获取当前日期
			const nextMonth = today.add(len, 'day'); // 增加几天
			//增加后的日期
			$('.date-end').html(nextMonth.format('YYYY-MM-DD'))
		}

		//输入的车牌长度大于7以后显示确定按钮
		$('.plate-addtime input').on('keyup',function(){
			let t = $(this)
			let val = t.val()
			t.val(val.toUpperCase()) //小写转大写
			if(t.val().length>= 7){
				t.parent().find('div').addClass('show')
			}else{
				t.parent().find('div').removeClass('show')
			}
		})
		//查找车牌事件
		let isMatch = false
		$('.plate-addtime div').click(function(){
			const pattern = /^[\u4e00-\u9fa5]{1}[A-HJ-NP-Z]{1}[A-HJ-NP-Z0-9]{5,6}$/;
			let str = $('.plate-addtime input').val()

			isMatch = pattern.test(str);
			if(isMatch){
				setDate("2023-05-05",residue) //开始日期,增加天数
			}else{
				showtoastFromDiv("请输入正确的车牌号码")
			}
		})
		//提交
		$('.btn-submit').click(function(){
			if(!isMatch){
				return false;
			}
			if($('.plate-addtime input').val().length < 7){
				showtoastFromDiv("请输入正确的车牌")
				return false
			}
			
			//提交成功提示
			$('.success').addClass("current")
			setTimeout(function(){
				//跳转页面
				window.location.href = './index.html'
			},2000)
		})

		//显示提示
		function showtoastFromDiv(str){
			$('.toast_div').toast({
				content:str,
				duration:2000
			});
		}
	</script>
</body>
</html>
