<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="author" content="GaryWang">
	<meta name='renderer' content='webkit'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1' >
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta name="format-detection" content="email=no">
	<title>车辆管理</title>
	<link href="css/basic.css?v=3" rel="stylesheet" type="text/css" />
	<link href="css/toast.css" rel="stylesheet" type="text/css" />
	<script>
        function autoScale(){
            var winW = document.documentElement.clientWidth;
            return Math.min (1,Math.min(winW / 1080));
        }
        document.documentElement.style.cssText = 'font-size:'+(100 * autoScale())+'px';
        //1rem = 100px
	</script>
	<style>
		#plate-keyborad {
			position: fixed;
			left:0;
			bottom:0;
			width: 100%;
			padding:0.3rem 0;
			background-color: #eef0f4;
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-items: center;
		}
		#plate-keyborad .keyborad-area,
		#plate-keyborad .keyborad-letter {
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-items: center;
			flex-wrap: wrap;
			width: 10.8rem;
		}
		#plate-keyborad > div > div {
			width: 0.87rem;
			height:0.87rem;
			border-radius: 0.1rem;
			background-color: white;
			font-size: 0.44rem;
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-items: center;
			margin:0.1rem;
			box-shadow: 1px 1px rgba(0, 0, 0, 0.1);
			user-select: none;
		}
		#plate-keyborad div.disabled {
			color:#e8e8e8;
		}
		#plate-keyborad div.del {
			background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NiIgaGVpZ2h0PSI0NiIgdmlld0JveD0iMCAwIDQ2IDQ2Ij48cGF0aCBmaWxsPSIjOTk5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MiwzOUgxOGExLjk5LDEuOTksMCwwLDEtLjQ2Mi0wLjA1OSwzLjI2OCwzLjI2OCwwLDAsMS0yLjg4LS45MDZMMS45MTQsMjUuMjkxYTMuMjc3LDMuMjc3LDAsMCwxLDAtNC42MzRMMTQuNjU3LDcuOTE0YTMuMjY4LDMuMjY4LDAsMCwxLDMuMDA5LS44OEExLjk5MywxLjk5MywwLDAsMSwxOCw3SDQyYTQsNCwwLDAsMSw0LDRWMzVBNCw0LDAsMCwxLDQyLDM5Wk0zNy43LDE2Ljg0N0wzMS41MywyM2w2LjE0NSw2LjE0NWExLjA4NywxLjA4NywwLDEsMS0xLjUzNywxLjUzN0wyOS45OTEsMjQuNTRsLTYuMTI4LDYuMTE2YTEuMDg2LDEuMDg2LDAsMCwxLTEuNTM3LTEuNTM0TDI4LjQ1NSwyMywyMi4zLDE2Ljg1MWExLjA4NywxLjA4NywwLDAsMSwxLjUzNy0xLjUzN2w2LjE1NSw2LjE1NSw2LjE2OC02LjE1NkExLjA4NiwxLjA4NiwwLDEsMSwzNy43LDE2Ljg0N1oiLz48L3N2Zz4=") no-repeat center center;
			background-size: 0.4rem auto;
			background-color: white;
			width: 1.84rem;
		}
		#plate-keyborad .keyborad-letter {
			display: none;
		}
		.a1 {
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-items: center;
		}
		.a1 li {
			width: 1rem;
			height: 1rem;
			border:1px solid black;
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-items: center;
		}
		.a1 li div {
			font-size: 0.1rem;
		}
	</style>
</head>
<body>
	<div class="wrap">
		<ul class="a1">
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li><div>新能源</div></li>
		</ul>
		<div id="plate-keyborad-show">
		</div>
	</div>
	<div class="toast_div" style="width:3rem;height:3rem;"></div>
	<script src="js/jquery-1.11.3.min.js"></script>
	<script src="js/toast.js"></script>
	<script>
		
		//车牌键盘
		let plateKeyBorad =  function(str,func){
			//绑定显示的元素
			let ele = document.createElement('div')
				ele.setAttribute('id',"plate-keyborad")

			let arrArea = '京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使';
			let arrLetter = "1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ";
			
			//保存车牌数据
			let plateStr = []
			let keyboradArea = document.createElement('div')
				keyboradArea.setAttribute('class',"keyborad-area")
			//生成地区键盘的内容
			for(a of arrArea){
				let e = document.createElement('div')
				let o = a
				e.innerHTML = o
				e.addEventListener('click',function(){
					judgePlateLen(o)
				})
				keyboradArea.appendChild(e)
			}
			//站位好看
			for(a of "ABCDEF"){
				let e = document.createElement('div')
				e.innerHTML = a
				e.setAttribute('class',"disabled")
				keyboradArea.appendChild(e)
			}
			//添加删除按钮
			let areaDel = document.createElement('div')
				areaDel.setAttribute('class',"del")
				areaDel.addEventListener('click',function(){
					delPlate()
				})
			keyboradArea.appendChild(areaDel)
			

			let keyboradLetter = document.createElement('div')
				keyboradLetter.setAttribute('class',"keyborad-letter ")
			//生成字母键盘的内容
			for(a of arrLetter){
				let e = document.createElement('div')
				let o = a
				e.innerHTML = a
				e.addEventListener('click',function(){
					judgePlateLen(o)
				})
				keyboradLetter.appendChild(e)
			}
			//添加删除按钮
			let letterDel = document.createElement('div')
				letterDel.setAttribute('class',"del")
				letterDel.addEventListener('click',function(){
					delPlate()
				})
			keyboradLetter.appendChild(letterDel)

			//把元素添加到页面中
			ele.appendChild(keyboradArea)
			ele.appendChild(keyboradLetter)
			document.body.appendChild(ele)

			function judgePlateLen(letter){
				//如果有则是添加 如果没有则是删除
				
				//添加完成以后点击数组也不会增加了
				if(plateStr.length >= 8){
					console.log('新能源车添加完成');
					if(letter){
						plateStr[plateStr.length-1] = letter
					}
				}else{
					if(letter){
						//向数组中添加新字符
						plateStr.push(letter)
					}
				}
				if(plateStr.length == 7){
					console.log('燃油车添加完成');
				}
				if(plateStr.length <= 0){
					keyboradLetter.style.display = "none"
					keyboradArea.style.display = "flex"
				}
				//如果长度大于1则显示字母键盘
				if(plateStr.length >= 1){
					keyboradArea.style.display = "none"
					keyboradLetter.style.display = "flex"
				}
				console.log(plateStr);
				if(func.callback){
					func.callback({list:plateStr})
				}else{
					callback({type:plateStr})
				}
			}
			//删除最后一位
			function delPlate(){
				plateStr.pop()
				judgePlateLen()
			}
			//回调
			function callback(obj){
				console.log(obj.plateStr);
			}
			function change(num){
				console.log(num);
			}
			return {
				change
			}
		}
		let abc = new plateKeyBorad('#plate-keyborad-show',{callback:function(obj){
			console.log(obj.list);
			if(obj.list.length <= 7){
				$('.a1 li').eq(7).html("<div>新能源</div>")
			}
			for(let i = 0;i < obj.list.length;i++){
				$('.a1 li').eq(i).html(obj.list[i])
			}
		}})
		abc.change(3)
	</script>
</body>
</html>
