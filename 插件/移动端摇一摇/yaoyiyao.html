<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>heart</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<meta name="author" content="GaryWang">
		<meta name='renderer' content='webkit'>
		<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1' >
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="email=no">
		<style type="text/css">
			*{margin:0;padding:0;}
		</style>
	</head>
	<body>
		<div></div>
		<script src="js/jquery-1.11.3.min.js"></script>
		<script type="text/javascript">
			
			var shake = function(){
				if(window.DeviceMotionEvent){
					var last_update = 0,		//保存结束时间
						SHAKE_THRESHOLD = 3000,	//运动阀值
						time_end = 0;			//存储上一次结束的时间
					var start_postion = {x:0,y:0,z:0};//开始位置坐标
					var end_postion = {x:0,y:0,z:0};//结束位置坐标
					window.addEventListener('devicemotion',function(event){
						//获取含重力的加速度
						var acceleration = event.accelerationIncludingGravity; 
						//获取当前时间
					  　　var curTime = new Date().getTime(); 
					  　　var diffTime = curTime - last_update;//
						if((new Date().getTime() - last_update) > 100){
							last_update = curTime;
							start_postion.x = acceleration.x,
							start_postion.y = acceleration.y,
							start_postion.z = acceleration.z;
							var speed = Math.abs((start_postion.x + start_postion.x + start_postion.x) - (end_postion.x + end_postion.y + end_postion.z) / diffTime * 10000);
							if(speed > SHAKE_THRESHOLD){
								alert('摇一下');
								return true;
							}
							end_postion.x = start_postion.x,
							end_postion.y = start_postion.y,
							end_postion.z = start_postion.z;
						}
					},false)
				}else{
					alert('不支持摇一摇!');
				}
			}

    </script>
	</body>
</html>
