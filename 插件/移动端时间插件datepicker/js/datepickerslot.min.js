var datePicker=function(t){let Y=[],o,s,c,a,e,y=(t=t||{}).disabled,l=t.callback||function(){console.log("默认callback")};if(!window.dayjs)return console.warn("请引用dayjs"),!1;s=dayjs(t.dateStart).format("YYYY-MM-DD")||"1970-01-01",c=dayjs(t.dateEnd).format("YYYY-MM-DD")||"2099-12-31",t.dateDefault&&(a=dayjs(t.dateDefault.start||Date()).format("YYYY-MM-DD"),e=dayjs(t.dateDefault.end||Date()).format("YYYY-MM-DD")),console.log(s,c),dayjs(c).valueOf()<=dayjs(s).valueOf()&&(console.log("请输入正确的时间范围"),s="1970-01-01",c="2099-12-31"),dayjs(e).valueOf()>dayjs(a).valueOf()&&dayjs(a).valueOf()>dayjs(s).valueOf()&&dayjs(e).valueOf()<=dayjs(c).valueOf()||(a=dayjs(Date()).format("YYYY-MM-DD"),e=dayjs(Date()).add(1,"day").format("YYYY-MM-DD"),console.log("请输入正确的默认时间"),c&&!s&&(a=dayjs(c).add(1,"day").format("YYYY-MM-DD"),e=dayjs(c).add(2,"day").format("YYYY-MM-DD")),s&&!c&&(a=dayjs(s).add(1,"day").format("YYYY-MM-DD"),e=dayjs(s).add(2,"day").format("YYYY-MM-DD")),s&&c&&(t=(dayjs(s).valueOf()+dayjs(c).valueOf())/2,a=dayjs(t).add(-1,"day").format("YYYY-MM-DD"),e=dayjs(t).add(1,"day").format("YYYY-MM-DD"))),o=dayjs(Date()),o=dayjs(a).valueOf()>dayjs(s).valueOf()&&dayjs(e).valueOf()<=dayjs(c).valueOf()?dayjs(a):dayjs(s).add(1,"day"),Y.push(a),Y.push(e);let d=document.createElement("div");d.setAttribute("id","datepicker");var t=document.createElement("div"),n=(t.setAttribute("class","date-show"),document.createElement("ul"));n.setAttribute("class","date-week");let m=document.createElement("ul"),i=(m.setAttribute("class","date-day"),document.createElement("div")),r=(i.setAttribute("class","btn-left"),document.createElement("div")),u=(r.setAttribute("class","btn-right"),document.createElement("div"));function v(t){t<0&&o.startOf("month").valueOf()>dayjs(s).startOf("month").valueOf()&&(o=o.subtract(1,"month")),0<t&&(o=o.add(1,"month")),function t(){m.firstChild&&(m.removeChild(m.firstChild),t())}();t=Y.indexOf("");-1!=t&&(Y.splice(t,1),Y.push("")),u.innerHTML=o.format("YYYY-MM");var t=(t=o.startOf("month").day())<=6?t:0,a=o.daysInMonth();f(t,!1,"disabled"),f(a,!0,""),f((a+t)%7!=0?7-(a+t)%7:0,!1,"disabled"),o.startOf("month").valueOf()>dayjs(s).add(1,"day").startOf("month").valueOf()?i.setAttribute("class","btn-left"):i.setAttribute("class","btn-left disabled"),o.startOf("month").valueOf()<dayjs(c).startOf("month").valueOf()?r.setAttribute("class","btn-right"):r.setAttribute("class","btn-right disabled");let e=[],d=0;!function t(a){a.valueOf()<=dayjs(Y[1]).valueOf()&&(d++,a=dayjs(Y[0]).add(d,"day").format("YYYY-MM-DD"),y.includes(a)&&e.push(a),t(dayjs(Y[0]).add(d,"day").valueOf()))}(dayjs(Y[0]).valueOf()),l({date:Y,disabled:e})}function f(a,e,l){var n,i,r=[];let u,f;e&&(dayjs(s).format("YYYY-MM")==o.format("YYYY-MM")&&(u=dayjs(s).date()),dayjs(c).format("YYYY-MM")==o.format("YYYY-MM"))&&(f=dayjs(c).date());for(let t=1;t<=a;t++){let d=e?(n=t,i=void 0,(i=new Array(2-n.toString().length)).push(n),i.join("0")):"",s=document.createElement("li");r.push(s),s.innerHTML=d,s.setAttribute("class",l),(u&&d<=u||f&&d>f||y.includes(o.date(d).format("YYYY-MM-DD")))&&s.setAttribute("class","disabled"),Y.includes(o.format("YYYY-MM")+"-"+d)&&s.setAttribute("class","active"),o.date(d).valueOf()>dayjs(Y[0]).valueOf()&&o.date(d).valueOf()<dayjs(Y[1]).valueOf()&&(s.getAttribute("class").includes("disabled")||s.setAttribute("class","range")),m.appendChild(s),s.addEventListener("click",function(){var t,a,e;if(!s.getAttribute("class").includes("disabled"))return t=o.date(d).format("YYYY-MM-DD"),a=o.date(d).valueOf(),-1!=(e=Y.indexOf(t))?(Y.splice(e,1),Y.push("")):(Y.includes("")&&(a<dayjs(Y[0]).valueOf()?(Y[1]=Y[0],Y[0]=t):Y[1]=t),a<dayjs(Y[0]).valueOf()&&(Y[0]=t),a>dayjs(Y[1]).valueOf()&&(Y[1]=t)),v(0),!1})}}u.setAttribute("class","date-text"),t.appendChild(i),t.appendChild(u),t.appendChild(r),i.addEventListener("click",function(){this.getAttribute("class").includes("disabled")||(v(-1),l("点击了前一个月"))}),r.addEventListener("click",function(){this.getAttribute("class").includes("disabled")||(v(1),l("点击了后一个月"))}),v();var j;for(j of["日","一","二","三","四","五","六"]){var M=document.createElement("li");M.innerHTML=j,n.appendChild(M)}return d.appendChild(t),d.appendChild(n),d.appendChild(m),document.body.appendChild(d),{destory:function(){d.remove()}}};