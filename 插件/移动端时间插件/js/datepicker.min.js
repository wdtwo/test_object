var datePicker=function(t){let f=[],o,Y=(t=t||{}).multiple||1,b=t.dateStart||"1970-01-01",a=t.dateEnd||"2099-12-31",m=t.disabled,v=t.callback||function(){console.log("默认callback")};if(!window.dayjs)return console.warn("请引用dayjs"),!1;if(dayjs(a).valueOf()<=dayjs(b).valueOf()&&(console.log("请输入正确的时间范围"),b="1970-01-01",a="2099-12-31"),1<Y&&t.dateDefaultMultiple){for(var e of t.dateDefaultMultiple)dayjs(e).valueOf()>dayjs(b).valueOf()&&dayjs(e).valueOf()<=dayjs(a).valueOf()&&f.push(e);console.log(f),0<f.length?o=dayjs(f[0]):(o=dayjs(Date()),dayjs(Date())<dayjs(b).valueOf()&&(o=dayjs(f)),dayjs(Date())>dayjs(a).valueOf()&&(o=dayjs(a)))}else o=dayjs(t.dateDefault).valueOf()>dayjs(b).valueOf()&&dayjs(t.dateDefault).valueOf()<=dayjs(a).valueOf()?dayjs(t.dateDefault||Date()):dayjs(b).add(1,"day"),f.push(o.format("YYYY-MM-DD"));let s=document.createElement("div");s.setAttribute("id","datepicker");var t=document.createElement("div"),d=(t.setAttribute("class","date-show"),document.createElement("ul"));d.setAttribute("class","date-week");let y=document.createElement("ul"),l=(y.setAttribute("class","date-day"),document.createElement("div")),i=(l.setAttribute("class","btn-left"),document.createElement("div")),h=(i.setAttribute("class","btn-right"),document.createElement("div"));function n(t){t<0&&o.startOf("month").valueOf()>dayjs(b).startOf("month").valueOf()&&(o=o.subtract(1,"month")),0<t&&(o=o.add(1,"month")),function t(){y.firstChild&&(y.removeChild(y.firstChild),t())}(),h.innerHTML=1==Y?o.format("YYYY-MM-DD"):o.format("YYYY-MM");var t=(t=o.startOf("month").day())<=6?t:0,e=o.daysInMonth();r(t,!1,"disabled"),r(e,!0,""),r((e+t)%7!=0?7-(e+t)%7:0,!1,"disabled"),o.startOf("month").valueOf()>dayjs(b).add(1,"day").startOf("month").valueOf()?l.setAttribute("class","btn-left"):l.setAttribute("class","btn-left disabled"),o.startOf("month").valueOf()<dayjs(a).startOf("month").valueOf()?i.setAttribute("class","btn-right"):i.setAttribute("class","btn-right disabled"),1==Y?(f[0]=o.format("YYYY-MM-DD"),v(dayjs(f[0]).valueOf()>dayjs(b).valueOf()?f[0]:"")):v(f)}function r(e,d,l){let i=[],n,r;d&&(dayjs(b).format("YYYY-MM")==o.format("YYYY-MM")&&(n=dayjs(b).date()),dayjs(a).format("YYYY-MM")==o.format("YYYY-MM"))&&(r=dayjs(a).date());for(let t=1;t<=e;t++){let a=d?(u=t,c=void 0,(c=new Array(2-u.toString().length)).push(u),c.join("0")):"",s=document.createElement("li");i.push(s),s.innerHTML=a,s.setAttribute("class",l),(n&&a<=n||r&&a>r||m.includes(o.date(a).format("YYYY-MM-DD")))&&s.setAttribute("class","disabled"),1==Y?a==o.date()&&(s.setAttribute("class","active"),b.includes(o.format("YYYY-MM")))&&a<=dayjs(b).date()&&s.setAttribute("class","active disabled"):f.includes(o.format("YYYY-MM")+"-"+a)&&s.setAttribute("class","active"),y.appendChild(s),s.addEventListener("click",function(){if(!s.getAttribute("class").includes("disabled"))if(1==Y){for(var t of i)t.setAttribute("class",t.getAttribute("class").includes("disabled")?"disabled":"");this.setAttribute("class","active"),o=o.date(a),h.innerHTML=o.format("YYYY-MM-DD"),v(h.innerHTML)}else{var e=f.indexOf(o.date(a).format("YYYY-MM-DD"));0<=e?(f.splice(e,1),this.setAttribute("class","")):f.length<Y&&(this.setAttribute("class","active"),o=o.date(a),h.innerHTML=o.format("YYYY-MM"),f.push(o.format("YYYY-MM-DD"))),v(f)}})}var u,c}h.setAttribute("class","date-text"),t.appendChild(l),t.appendChild(h),t.appendChild(i),l.addEventListener("click",function(){this.getAttribute("class").includes("disabled")||(n(-1),v("点击了前一个月"))}),i.addEventListener("click",function(){this.getAttribute("class").includes("disabled")||(n(1),v("点击了后一个月"))}),n();var u;for(u of["日","一","二","三","四","五","六"]){var c=document.createElement("li");c.innerHTML=u,d.appendChild(c)}return s.appendChild(t),s.appendChild(d),s.appendChild(y),document.body.appendChild(s),{destory:function(){s.remove()}}};