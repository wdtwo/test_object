<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="author" content="GaryWang">
	<meta name='renderer' content='webkit'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1' >
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta name="format-detection" content="email=no">
	<title>手机轮盘</title>
	<link href="css/basic.css" rel="stylesheet" type="text/css">
</head>
<body style="background: #F9F9FB;">
	<div class="wrap page_2 no-bg">
		<header class="flex">
			<i class="go-back"></i>
			<div>我的奖品</div>
			<span></span>
		</header>
		<a href="address.html" class="flex go-address">
			填写地址
			<small>（请您及时填写收货地址，最晚在3天内填写完成）</small>
			<img src="images/city-select-icl.png"/>
		</a>
		<ul class="prizelist">
			<li>
				<div class="icon flex">
					<img src="images/prize-101.png"/>
				</div>
				<div class="txt">
					<h3>10元优惠券</h3>
					<p>满129可用</p>
					<div class="time">2019-12-20</div>
				</div>
			</li>
			<li>
				<div class="icon flex">
					<img src="images/prize-101.png"/>
				</div>
				<div class="txt">
					<h3>10元优惠券</h3>
					<p>满129可用</p>
					<div class="time">2019-12-20</div>
				</div>
			</li>
			<li>
				<div class="icon flex">
					<img src="images/prize-101.png"/>
				</div>
				<div class="txt">
					<h3>10元优惠券</h3>
					<p>满129可用</p>
					<div class="time">2019-12-20</div>
				</div>
			</li>
			<li>
				<div class="icon flex">
					<img src="images/prize-jf.png"/>
				</div>
				<div class="txt">
					<h3>200积分</h3>
					
					<div class="time">2019-12-20</div>
				</div>
			</li>
			<li>
				<div class="icon flex">
					<img src="images/prize-demo.png"/>
				</div>
				<div class="flex link">
					<div class="txt">
						<h3>纸巾礼盒纸巾礼盒纸巾礼盒纸巾礼盒</h3>
						<div class="time">2019-12-20</div>
					</div>
					<a href="" class="disabled">已过期</a>
				</div>
			</li>
		</ul>
		<div class="more">加载中...</div>
	</div>
	<script src="js/jquery-2.1.3.min.js"></script>
	<script src="js/mock.js"></script>
	<script src="js/common.js"></script>
	<script>

		var get_datas_lock = true;
		$(window).scroll(function(){
			var h = $('.wrap').height() * Math.min(window.screen.availWidth,750)/750 - window.screen.availHeight - 20;
			if($(this).scrollTop() > h && get_datas_lock){
				get_datas_lock = false;
				getDatas()
			}
		})
		function getDatas(){
			/*获取数据*/
			$.ajax({
				url:'/',
				success:function(data){
					setTimeout(function(){
						Mock.mock({
							"array|5": [
								`
								<li>
									<div class="icon flex">
										<img src="images/prize-101.png"/>
									</div>
									<div class="txt">
										<h3>10元优惠券</h3>
										<p>满129可用</p>
										<div class="time">2019-12-20</div>
									</div>
								</li>
								`
							]
						})["array"].forEach(function(v,i){
							$('.prizelist').append(v);
						});
						get_datas_lock = true;
						//noMore()没有更多可以加载了
					},100)
				}
			})
		}
		function noMore(){
			/*加载完成*/ 
			get_datas_lock = false;
			$('.more').val('加载完成，没有更多了！');
		}
		//阻止禁用的a标签跳转链接
		$('a.disabled').on("click",function(){
			return false;
		})
	</script>
</body>
</html>